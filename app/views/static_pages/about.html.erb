<% provide(:title, 'About') %>
<h3>About page</h3>


<link href="//cdnjs.cloudflare.com/ajax/libs/x-editable/1.5.0/bootstrap3-editable/css/bootstrap-editable.css" rel="stylesheet"/>
<script src="//cdnjs.cloudflare.com/ajax/libs/x-editable/1.5.0/bootstrap3-editable/js/bootstrap-editable.min.js"></script>





<br/>
<b>1. Portfolio week:</b>

<table id="portfolio_week_table" class="display table table-striped table-bordered table-condensed">
	<thead>
		<tr>
			<th rowspan="2">#</th>
			<th rowspan="2" style="width:100px !important">Брок</th>
			<th rowspan="2">Fav</th>
			<th rowspan="2">Управ</th>
			<th rowspan="2">Счет</th>
			<th colspan="5">Информация о трейдере</th>
			<th colspan="5">Текущая неделя</th>
			<th rowspan="2">Пополн</th>
		</tr>
		<tr>
			<th>Срок</th>
			<th>ТП</th>
			<th>% инв</th>
			<th>2.0</th>
			<th>min S</th>
			<th>% портф</th>
			<th>S start</th>
			<th>S end</th>
			<th>Prof S</th>
			<th>Prof %</th>
		</tr>
	</thead>
	<tbody>
		<% user = User.find_by_name("User_5") %>
		<% portfolio = user.portfolios.sample %>
		<% portfolio_week = portfolio.portfolio_weeks.sample %>
		<% portfolio_traders = portfolio_week.portfolio_traders %>
		<% portfolio_traders.all.each do |portfolio_trader| %>
			<% current_trader = Trader.find_by_account(portfolio_trader.trader_account) %>
			<tr>
				<td></td>
				<td><%= current_trader.brocker %></td>
				<td class="fav_column" id="<%= current_trader.account %>"><%= ["+", "-"].sample %></td>
				<td class="trader_column" data-toggle="tooltip" data-placement="right" title="<%= current_trader.name %>"><a href="http://google.com" target="_blank"><%= current_trader.name %></a></td>
				<td><%= current_trader.account %></td>
				<td><%= ((Time.now - current_trader.registration_date) / (60*60*24)).to_i %></td>
				<td><%= current_trader.tp %></td>
				<td><%= current_trader.investor_percent %></td>
				<td><%= current_trader.pamm2 %></td>
				<td><%= current_trader.min_value %></td>
				<td></td>
				<td class="start_value_column"><%= portfolio_trader.start_value.round(2) %></td>
				<td class="end_value_column"><%= portfolio_trader.end_value.round(2) %></td>
				<td><%= (portfolio_trader.end_value - portfolio_trader.start_value).round(2) %></td>
				<td><%= ((portfolio_trader.end_value / portfolio_trader.start_value - 1) * 100).round(2) %></td>
				<td class="pay_column" id="<%= current_trader.account %>">pay</td>
			</tr>
		<% end %>
	</tbody>
	<tfoot>
		<tr>
			<th></th>
			<th></th>
			<th></th>
			<th></th>
			<th></th>
			<th></th>
			<th></th>
			<th></th>
			<th></th>
			<th></th>
			<th></th>
			<th></th>
			<th></th>
			<th></th>
			<th></th>
			<th></th>
		</tr>
	</tfoot>
</table>

<br/>
<button id="add_row_button" class="btn btn-success disabled">Add row</button>
<button id="remove_row_button" class="btn btn-success">Remove row</button>

<br/><br/>
<input id="trader_input" type="text" name="Trader" placeholder="Trader" style="width:200px">

<br/>
<select id="brocker_select" style="width:200px">
	<option value="">All</option>
	<option>FX</option>
	<option>Panteon</option>
</select>







<br/><br/><br/><br/><br/><br/><br/><br/><br/>
<b>2. Traders:</b>

<table id="traders_table" class="display">
	<thead>
		<tr>
			<th rowspan="2">Брок</th>
			<th rowspan="2">Fav</th>
			<th rowspan="2">Управ</th>
			<th rowspan="2">Счет</th>
			<th rowspan="2">Срок</th>
			<th rowspan="2">2.0</th>
			<th rowspan="2">ТП</th>
			<th rowspan="2">min S</th>
			<th rowspan="2">% инв</th>
			<th colspan="3">Доходность счета</th>
		</tr>
		<tr>
			<th>3мес</th>
			<th>1год</th>
			<th>Все время</th>
		</tr>
	</thead>
	<tbody>
		<% Trader.all.each do |trader| %>
			<tr>
				<td><%= trader.brocker %></td>
				<td>...</td>
				<td><%= trader.name %></td>
				<td><%= trader.account %></td>
				<td><%= ((Time.now - trader.registration_date) / (60*60*24)).to_i %></td>
				<td><%= trader.pamm2 %></td>
				<td><%= trader.tp %></td>
				<td><%= trader.min_value %></td>
				<td><%= trader.investor_percent %></td>
				<td>...</td>
				<td>...</td>
				<td>...</td>
			</tr>
		<% end %>
	</tbody>
</table>






<br/><br/><br/><br/><br/><br/><br/><br/><br/>
<b>3. Portfolios:</b>

<table id="portfolios_table" class="display">
	<thead>
		<tr>
			<th>Fav</th>
			<th>Портф</th>
			<th>Инв</th>
			<th>Недель</th>
			<th>Рейт</th>
		</tr>
	</thead>
	<tbody>
		<% Portfolio.all.each do |portfolio| %>
			<tr>
				<td>...</td>
				<td><%= portfolio.name %></td>
				<td><%= portfolio.user.name %></td>
				<td><%= portfolio.portfolio_weeks.count %></td>
				<td><%= portfolio.rating %></td>
			</tr>
		<% end %>
	</tbody>
</table>

<div id="selected_portfolio_data">...</div>







<br/><br/><br/><br/><br/><br/><br/><br/><br/>
<b>4. Trader select:</b>

<br/>
<div id="brocker_filter" style="width:150px; display:inline-block;"></div>
<div id="favorite_filter" style="width:150px; display:inline-block;"></div>
<div id="trader_name_filter" style="width:150px; display:inline-block;"></div>
<div id="trader_account_filter" style="width:150px; display:inline-block;"></div>

<table id="trader_select_table" class="display">
	<thead>
		<tr>
			<th>Брок</th>
			<th>Fav</th>
			<th>Управ</th>
			<th>Счет</th>
		</tr>
	</thead>
	<tbody>
		<% Trader.all.each do |trader| %>
			<tr>
				<td><%= trader.brocker %></td>
				<td>...</td>
				<td><%= trader.name %></td>
				<td><%= trader.account %></td>
			</tr>
		<% end %>
	</tbody>
	<tfoot>
		<tr>
			<th></th>
			<th></th>
			<th></th>
			<th></th>
		</tr>
	</tfoot>
</table>






